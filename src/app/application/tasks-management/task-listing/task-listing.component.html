<div class="w-1/2 mx-auto static">
  <div class="flex justify-between mb-5">
    <button mat-button color="primary" (click)="openAddTask()">
      <mat-icon
        aria-hidden="false"
        aria-label="plus"
        fontIcon="add_circle"
      ></mat-icon>
      add task
    </button>

    <button mat-button color="primary" (click)="logout()">logOut</button>
  </div>

  <ng-container *ngIf="errorMessage">
    <div class="my-3 border border-red-600 p-4">
      <mat-error>{{ errorMessage }} </mat-error>
    </div>
  </ng-container>

  <table
    class="table-auto w-full mx-auto border-collapse border border-slate-400"
    *ngIf="taskList && taskList.length > 0; else NoDataTemplate"
  >
    <thead>
      <tr>
        <th class="border border-slate-300">Title</th>
        <th class="border border-slate-300">Description</th>
        <th class="border border-slate-300">Status</th>
        <th class="border border-slate-300">Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let task of taskList">
        <td class="border border-slate-300 text-center">{{ task.title }}</td>
        <td class="border border-slate-300 text-center">
          {{ task.description }}
        </td>
        <td class="border border-slate-300 text-center">{{ task.status }}</td>
        <td class="border border-slate-300 flex justify-center">
          <span>
            <button
              mat-icon-button
              color="primary"
              (click)="requestEditTask(task)"
            >
              <mat-icon
                aria-hidden="false"
                aria-label="edit task"
                fontIcon="edit"
              ></mat-icon>
            </button>
          </span>

          <span>
            <button
              mat-icon-button
              color="primary"
              (click)="requestDeleteTask(task.id)"
            >
              <mat-icon
                aria-hidden="false"
                aria-label="delete task"
                fontIcon="delete"
              ></mat-icon>
            </button>
          </span>
        </td>
      </tr>
    </tbody>
  </table>

  <ng-template #NoDataTemplate>
    <h4>No Task Available!</h4>
  </ng-template>

  <ng-container *ngIf="isLoading">
    <div class="absolute top-1/2 right-1/2">
      <mat-spinner></mat-spinner>
    </div>
  </ng-container>
</div>
